<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" />
    <%= stylesheet_link_tag 'bootstrap.min', :media => 'all' %>
    <%= stylesheet_link_tag 'bootstrap-responsive.min', :media => 'all' %>
    <%= stylesheet_link_tag 'pygments', :media => 'all' %>
    <%= stylesheet_link_tag 'style.css', :media => 'all' %>
    <%= javascript_include_tag  'jquery-1.8.3.min' %>
    <%= javascript_include_tag  'bootstrap.min' %>
    <script type="text/javascript" src="//use.typekit.net/fed3zry.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <title><%= data.page.title %> | BradChen.com</title>
  </head>
  <body>
    <div id="wrapper" class="container">
      <header id="site-header" class="row">
        <h1><a href="/">BradChen.com</a></h1>
      </header>

      <div class="row">
        <section id="main-content" class="span8">
          <% if !data.page.hide_title %>
            <h2><%= link_to data.page.title, '/' + request.path %></h2>
          <% end %>

          <% if data.page.date %>
            <div class="date">
              <%= data.page.date.strftime('%B %e, %Y') %>
            </div>
          <% end %>

          <% if current_page.data.cover_image %>
            <p class="text-center">
              <% link_to '/' + request.path do %>
                <%= image_tag current_page.data.cover_image,
                              :alt => data.page.title %>
              <% end %>
            </p>
          <% end %>

          <%= yield %>

          <% if data.page.date %>
            <p>
              <%= link_to '« Go back', '/' %>
            </p>
          <% end %>
        </section>

        <aside id="sidebar" class="span3 offset1">
          <h2><a href="/">BradChen.com</a></h2>

          <section>
            <h3>About</h3>

            <p>
              <img src="http://www.gravatar.com/avatar/a6543df3fe96f08b76e7ed77326a345b?s=480"
                alt="Brad Chen’s Avatar" />
            </p>

            <p>
              <em>I am a software developer based in Toronto, Ontario. I am
              interested in building beautiful web applications using equally
              elegant solutions.</em>
            </p>
          </section>

          <section>
            <h3>Recent Articles</h3>

            <ol class="no-bullets">
              <% blog.articles[0...8].each do |article| %>
                <li>
                  <a href="<%= article.url %>"><%= article.title %></a>
                  <span class="date">
                    <%= article.date.strftime('%b %e, %Y') %>
                  </span>
                </li>
              <% end %>
            </ol>
          </section>

          <section>
            <h3>Tags</h3>

            <ol class="no-bullets">
              <% sorted = blog.tags.sort_by{|k, v| v.size * -1000 + k[0]} %>
              <% sorted.each_with_index do |(tag, articles), i| %>
                <li>
                  <a href="<%= tag_path tag %>"><%= tag %></a>
                  (<%= articles.size %>)
                  <% if i > 10 %>
                    <% break %>
                  <% end %>
                </li>
              <% end %>
            </ol>
          </section>

          <section>
            <h3>Follow me on</h3>

            <ul>
              <li><a href="https://github.com/vvasabi">GitHub</a></li>
              <li><a href="http://www.linkedin.com">LinkedIn</a></li>
            </ul>
          </section>
        </aside>
      </div>

      <footer id="site-footer" class="row">
        &copy; 2013 Brad Chen
      </footer>
    </div>
  </body>
</html>
